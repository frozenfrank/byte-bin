<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Toggl to DeLorean</title>

  <script src="https://kit.webawesome.com/381cfdad10d64aac.js" crossorigin="anonymous"></script>

  <style type="text/css">
  [slot='banner'] {
    --wa-color-text-link: var(--wa-color-neutral-on-loud);
    background-color: var(--wa-color-neutral-fill-loud);
  }
  [slot='header'] {
    background-color: var(--wa-color-brand-fill-normal);
  }
  </style>
</head>
<body>
  <wa-page disable-sticky="aside">
    <div slot="banner" class="wa-body-s">
      <a href="https://webawesome.com/" class="wa-cluster wa-align-items-baseline wa-gap-xs" style="flex-wrap: nowrap;">
        <wa-icon name="crown" style="color: var(--wa-color-orange-60)"></wa-icon>
        <span>Proudly developed with WebAwesome</span>
      </a>
    </div>
    <header slot="header" class="wa-split">
      <div class="wa-cluster">
        <wa-icon name="stopwatch" style="color: var(--wa-color-brand-fill-loud); font-size: 1.5em"></wa-icon>
        <span id="brand-name" class="wa-heading-m wa-desktop-only">Toggl Transfer Report</span>
      </div>
    </header>

    <!-- Main body content -->
    <main class="wa-body-l">
      <h2>Step 1: Import Data</h2>
      <h3>Option 1.1: From a Toggl CSV export</h3>
      <input type="file" id="togglFileInput" accept=".csv" />
      <wa-divider></wa-divider>
      <h3>Option 1.2: With a Toggl API Token</h3>
      <form id="download-toggl-form">
        <wa-callout size="small">
          <wa-icon slot="icon" name="lightbulb" variant="regular"></wa-icon>
          Your Toggl API token can be revealed at the bottom of <a href="https://track.toggl.com/profile">your profile page</a>. The token is expected to be at least <b>32&nbsp;characters</b> in length.
        </wa-callout>
        <br>
        <div class="wa-flank:end">
          <wa-input type="password" placeholder="Toggle API Token" password-toggle with-clear id="download-toggl-token" minlength="32"></wa-input>

          <wa-tooltip for="download-toggl-button">Downloads the last 45 days of time entries</wa-tooltip>
          <wa-button type="submit" variant="brand" id="download-toggl-button" disabled>
            <wa-icon slot="start" name="cloud-arrow-down"></wa-icon>
            <span id="download-toggl-label">Download Data</span>
          </wa-button>
        </div>
      </form>
      <br/>

      <h2>Step 2: Filter Entries</h2>
      <div class="wa-flank:start wa-align-items-start">
        <wa-radio-group
          label="Choose Time Scale"
          orientation="horizontal"
          value="1"
        >
          <wa-radio appearance="button" value="1">One Day</wa-radio>
          <wa-radio appearance="button" value="2">One Week</wa-radio>
          <wa-radio appearance="button" value="3">One Month</wa-radio>
          <wa-radio appearance="button" value="4">All Time</wa-radio>
        </wa-radio-group>
        <br/>

        <wa-select id="daySelect" label="Select a Day">
          <wa-option value="" selected disabled>-- Choose data source first --</wa-option>
        </wa-select>

        <wa-select id="weekSelect" label="Select a Week" hint="Week begins on Sunday">
          <wa-option value="" selected disabled>-- Choose data source first --</wa-option>
        </wa-select>

        <wa-select id="monthSelect" label="Select a Month">
          <wa-option value="" selected disabled>-- Choose data source first --</wa-option>
        </wa-select>
      </div>
      <br/>

      <h2>Step 3: View Results</h2>
      <div class="wa-stack">
        <div class="wa-flank:end wa-align-items-start">
          <div>
            <wa-button size="small" id="prevDayButton">
              <wa-icon slot="start" name="arrow-left"></wa-icon>
              <u>P</u>revious Day
            </wa-button>
            <wa-switch id="showAllDescriptionsSwitch">Show All <u>D</u>escriptions</wa-switch>
          </div>
          <wa-button size="small" id="nextDayButton">
            <wa-icon slot="end" name="arrow-right"></wa-icon>
            <u>N</u>ext Day
          </wa-button>
        </div>

        <pre id="timecardReport">Waiting for report output...</pre>
      </div>
      <br/>

    </main>
  </wa-page>

  <script src="./papaparse.min.js"></script>
  <script src="./toggl/access.js"></script>
  <script src="./time-entry.js"></script>
  <script src="./script.js"></script>
</body>
</html>
